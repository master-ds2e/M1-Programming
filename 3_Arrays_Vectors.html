<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Arrays</title>

<script src="site_libs/header-attrs-2.1/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">M1 Programming</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="2_Basics.html">Basics</a>
</li>
<li>
  <a href="3_Arrays_Vectors.html">Arrays/Vectors</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Arrays</h1>

</div>


<style>
div.python pre { background-color: #d0f5a9; }
</style>
<style>
div.r pre { background-color: #dfdddf; }
</style>
<p>This chapter deepens the notions of arrays and vectors seen in the ‘Basics’ chapter. In python, numpy will be the main package to deal with arrays, while in R everything is contains in the base. The main advantage of using vectors is to vectorize operation, instead of using loops to run operation on each elements of an object, we can simply perform it on blocks of data in a more efficient way.</p>
<p>
 
</p>
<p>
 
</p>
<p>let’s first see an example to understand the benefit of using vectorized operation :</p>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

import numpy as np
import time 

arr = np.arange(2000000)

lst = list(range(2000000))

t = time.time()
arr_2 = arr*2
time.time() - t
## 0.011949539184570312
t = time.time()
lst_2 = [i*2  for i in lst]
time.time() - t

## 0.21106982231140137</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

vec = c(1:2000000)

t = Sys.time()
vec_2 = vec*2
Sys.time() - t
## Time difference of 0.006968975 secs

t = Sys.time()
vec_2_loop &lt;- rep(0,length(vec))
for(i in 1:length(vec)){
  vec_2_loop[i] = vec[i]*2
    }
Sys.time() - t
## Time difference of 0.342489 secs</code></pre>
</div>
</div>
</div>
<div id="create-arrays" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Create arrays</h1>
<p>The NumPy library contains multidimensional array and matrix data structures, it provides methods to efficiently operate on it. If you do not have numpy on you computer, open a terminal and run <code>pip install numpy</code>.</p>
<p>To use numpy one need to load the module by running <code>import numpy as np</code>, you can just import numpy but then you will need to write numpy.something to perform calculation. In order to keep code standardized we simply say that we will refers to numpy using np.</p>
<p>Numpy allows to perform fast and efficient calculation. The main difference between Numpy and python list is that all elements in a numpy array must be homogenous, Numpy uses less memory to store data.</p>
<table>
<thead>
<tr class="header">
<th>Functions</th>
<th align="right">Tasks</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>array</td>
<td align="right">Create numpy array</td>
</tr>
<tr class="even">
<td>ndim</td>
<td align="right">Dimension of the array</td>
</tr>
<tr class="odd">
<td>shape</td>
<td align="right">Size of the array (Number of rows and Columns)</td>
</tr>
<tr class="even">
<td>size</td>
<td align="right">Total number of elements in the array</td>
</tr>
<tr class="odd">
<td>dtype</td>
<td align="right">Type of elements in the array, i.e., int64, character</td>
</tr>
<tr class="even">
<td>reshape</td>
<td align="right">Reshapes the array without changing the original shape</td>
</tr>
<tr class="odd">
<td>resize</td>
<td align="right">Reshapes the array. Also change the original shape</td>
</tr>
<tr class="even">
<td>arange</td>
<td align="right">Create sequence of numbers in array</td>
</tr>
<tr class="odd">
<td>Itemsize</td>
<td align="right">Size in bytes of each item</td>
</tr>
<tr class="even">
<td>diag</td>
<td align="right">Create a diagonal matrix</td>
</tr>
<tr class="odd">
<td>vstack</td>
<td align="right">Stacking vertically</td>
</tr>
<tr class="even">
<td>hstack</td>
<td align="right">Stacking horizontally</td>
</tr>
</tbody>
</table>
<ul>
<li>Starting from existing list or vector :</li>
</ul>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

import numpy as np

arr = np.array([1, 2, 3, 4])
arr
## array([1, 2, 3, 4])</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

arr = matrix(c(1, 2, 3, 4), 4, 1)
arr
##      [,1]
## [1,]    1
## [2,]    2
## [3,]    3
## [4,]    4</code></pre>
</div>
</div>
</div>
<ul>
<li>Create arrays with zero, one, sequence..</li>
</ul>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

np.zeros([2, 3])

## array([[0., 0., 0.],
##        [0., 0., 0.]])
np.ones((2, 3))

## array([[1., 1., 1.],
##        [1., 1., 1.]])
np.arange(1, 7)

## array([1, 2, 3, 4, 5, 6])
np.arange(1, 7).reshape(2, 3)

## remember from first chapter that array in R and Python aren&#39;t store the same way, set order = &#39;F&#39; to get the same results

## array([[1, 2, 3],
##        [4, 5, 6]])
np.arange(1, 7).reshape([2, 3], order = &#39;F&#39;)
## array([[1, 3, 5],
##        [2, 4, 6]])
np.linspace(1, 4,num = 10)
## array([1.        , 1.33333333, 1.66666667, 2.        , 2.33333333,
##        2.66666667, 3.        , 3.33333333, 3.66666667, 4.        ])</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

matrix(rep(0,2*3), 2, 3)
##      [,1] [,2] [,3]
## [1,]    0    0    0
## [2,]    0    0    0

matrix(rep(1,2*3), 2, 3)
##      [,1] [,2] [,3]
## [1,]    1    1    1
## [2,]    1    1    1

seq(1,6)
## [1] 1 2 3 4 5 6

matrix(seq(1,6),2,3)
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6

seq(1, 4, length.out = 10)
##  [1] 1.000000 1.333333 1.666667 2.000000 2.333333 2.666667 3.000000 3.333333
##  [9] 3.666667 4.000000</code></pre>
</div>
</div>
</div>
<div id="random-array" class="section level2" number="1.1">
<h2 number="1.1"><span class="header-section-number">1.1</span> Random array</h2>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

#generate an array
arr_rd = np.random.randn(4,5)

arr_rd
## array([[ 1.37825303, -0.44842449,  0.43129529, -0.70881137,  0.90072572],
##        [-0.15605575, -0.97798249, -0.37847772, -1.35493777,  0.66889525],
##        [ 1.16625322, -0.90592642, -0.483807  , -0.46465304, -1.41281767],
##        [-0.51889789,  0.37195094,  0.56999552,  1.41072301,  1.08365275]])</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

#generate a matrix
mat_rd &lt;- matrix(runif(4*5),4,5)

mat_rd
##           [,1]       [,2]      [,3]      [,4]      [,5]
## [1,] 0.8223458 0.03799799 0.5024586 0.6130117 0.4394536
## [2,] 0.8668301 0.31477905 0.6120102 0.4038400 0.1953971
## [3,] 0.4539151 0.57059801 0.3931311 0.3776940 0.6291643
## [4,] 0.4132240 0.53917526 0.7960246 0.5691992 0.1404577</code></pre>
</div>
</div>
</div>
</div>
<div id="indexing-and-slicing" class="section level2" number="1.2">
<h2 number="1.2"><span class="header-section-number">1.2</span> Indexing and slicing</h2>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

arr = np.arange(1,7).reshape(2,3)
arr[0]
## array([1, 2, 3])
arr[:2]
## array([[1, 2, 3],
##        [4, 5, 6]])
arr[1:]
## array([[4, 5, 6]])</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R


mat &lt;- matrix(1:6,2,3,byrow = T)
mat[1,]
## [1] 1 2 3
mat[1:2,]
##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
mat[2:dim(mat)[1],]
## [1] 4 5 6</code></pre>
</div>
</div>
</div>
</div>
<div id="shape-and-size" class="section level2" number="1.3">
<h2 number="1.3"><span class="header-section-number">1.3</span> Shape and size</h2>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

# .ndim gives the number of axes, or dimensions, of the array.
arr_rd.ndim
## 2</code></pre>
<pre class="python"><code># Python 

# .size gives the total number of elements of the array. 
arr_rd.size
## 20</code></pre>
<pre class="python"><code># Python 

# .shape display a tuple of integers with the number of elements stored along each dimension of the array
arr_rd.shape
## (4, 5)</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

# length gives the total number of elements of the array.
length(mat_rd)
## [1] 20</code></pre>
<pre class="r"><code>#R

# dim display a vector of integers with the number of elements stored along each dimension of the array
dim(mat_rd)
## [1] 4 5</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="modifiying-arrays" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Modifiying arrays</h1>
<div id="add-elements" class="section level2" number="2.1">
<h2 number="2.1"><span class="header-section-number">2.1</span> Add elements</h2>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 
arr

# /!\ using append it convert the array to a 1d array
## array([[1, 2, 3],
##        [4, 5, 6]])
arr_1d = np.append(arr, [7, 8, 9])
arr_1d

# using insert you can add rows and columns 
## array([1, 2, 3, 4, 5, 6, 7, 8, 9])
np.insert(arr, len(arr), [7, 8, 9], axis = 0)
## array([[1, 2, 3],
##        [4, 5, 6],
##        [7, 8, 9]])
np.insert(arr, 2, [7, 8], axis = 1)
## array([[1, 2, 7, 3],
##        [4, 5, 8, 6]])</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R
mat
##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6

rbind(mat,7:9)
##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9

cbind(mat,7:8)
##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    7
## [2,]    4    5    6    8</code></pre>
</div>
</div>
</div>
<ul>
<li>Combining/splitting arrays</li>
</ul>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 
arr0 = np.zeros([2,3])
arr1 = np.ones([2,3])

arr01 = np.vstack([arr0,arr1])
arr01

#or 
## array([[0., 0., 0.],
##        [0., 0., 0.],
##        [1., 1., 1.],
##        [1., 1., 1.]])
np.concatenate([arr0,arr1], axis = 0)
## array([[0., 0., 0.],
##        [0., 0., 0.],
##        [1., 1., 1.],
##        [1., 1., 1.]])
np.hstack([arr0,arr1])

#or
## array([[0., 0., 0., 1., 1., 1.],
##        [0., 0., 0., 1., 1., 1.]])
np.concatenate([arr0,arr1], axis = 1)
## array([[0., 0., 0., 1., 1., 1.],
##        [0., 0., 0., 1., 1., 1.]])
np.hsplit(arr01,3)
## [array([[0.],
##        [0.],
##        [1.],
##        [1.]]), array([[0.],
##        [0.],
##        [1.],
##        [1.]]), array([[0.],
##        [0.],
##        [1.],
##        [1.]])]
np.vsplit(arr01,4)
## [array([[0., 0., 0.]]), array([[0., 0., 0.]]), array([[1., 1., 1.]]), array([[1., 1., 1.]])]</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

mat0 = matrix(0,2,3)
mat1 = matrix(1,2,3)

mat01 = rbind(mat0,mat1)
mat01
##      [,1] [,2] [,3]
## [1,]    0    0    0
## [2,]    0    0    0
## [3,]    1    1    1
## [4,]    1    1    1

cbind(mat0,mat1)
##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    0    0    0    1    1    1
## [2,]    0    0    0    1    1    1

# horizontal
asplit(mat01,2)
## [[1]]
## [1] 0 0 1 1
## 
## [[2]]
## [1] 0 0 1 1
## 
## [[3]]
## [1] 0 0 1 1

#vertical
asplit(mat01,1)
## [[1]]
## [1] 0 0 0
## 
## [[2]]
## [1] 0 0 0
## 
## [[3]]
## [1] 1 1 1
## 
## [[4]]
## [1] 1 1 1</code></pre>
</div>
</div>
</div>
</div>
<div id="delete-elements" class="section level2" number="2.2">
<h2 number="2.2"><span class="header-section-number">2.2</span> Delete elements</h2>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

np.delete(arr,1 , axis = 1)
## array([[1, 3],
##        [4, 6]])
np.delete(arr,1 , axis = 0)
## array([[1, 2, 3]])</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

mat[,-2]
##      [,1] [,2]
## [1,]    1    3
## [2,]    4    6

mat[-2,]
## [1] 1 2 3</code></pre>
</div>
</div>
</div>
</div>
<div id="sorting" class="section level2" number="2.3">
<h2 number="2.3"><span class="header-section-number">2.3</span> Sorting</h2>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

arr = np.random.randn(10)

arr
## array([ 0.1909127 , -0.80776392,  1.23701798, -0.80133688, -0.19534472,
##         0.70470071,  0.57060057,  0.04694371, -0.49579639, -0.10471733])
arr.sort()
</code></pre>
<pre class="python"><code># Python 

arr = np.random.randn(4,3)

arr
## array([[-0.3686882 , -0.94861888, -0.4282952 ],
##        [ 0.4502898 ,  0.49218971,  2.06196401],
##        [-1.05419983,  3.03251775,  2.36080367],
##        [-0.29686438,  1.01843272,  0.09371542]])
arr.sort(1)
</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

arr &lt;- runif(10)

arr
##  [1] 0.40640333 0.86979055 0.50719659 0.01018125 0.75554270 0.49805405
##  [7] 0.85644079 0.36789341 0.51176759 0.21135712
sort(arr)
##  [1] 0.01018125 0.21135712 0.36789341 0.40640333 0.49805405 0.50719659
##  [7] 0.51176759 0.75554270 0.85644079 0.86979055</code></pre>
<pre class="r"><code># R

arr &lt;- matrix(runif(4*3),4,3)

arr
##            [,1]      [,2]      [,3]
## [1,] 0.75087845 0.9102698 0.6369779
## [2,] 0.24853844 0.8528263 0.2142201
## [3,] 0.76444157 0.3291956 0.8706128
## [4,] 0.07193228 0.8156847 0.3337128
apply(arr,MARGIN = 2, FUN = sort)
##            [,1]      [,2]      [,3]
## [1,] 0.07193228 0.3291956 0.2142201
## [2,] 0.24853844 0.8156847 0.3337128
## [3,] 0.75087845 0.8528263 0.6369779
## [4,] 0.76444157 0.9102698 0.8706128</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="conditional-logic-on-array" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Conditional Logic on array</h1>
<p>Imagine two square matrices representing interaction between entities. Each matrix is a basic network: having interaction = 1, no interaction = 0. You want to know if two entities that are linked in one network are also linked in an other network. Instead of checking each entities interaction sequentially in a loop, one can simply use matrix to do element-wise calculation and get the same answer.</p>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

#generate a list
list_1 = [[0,1,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0]]
network_1 = np.array(list_1)

#generate a sequence
list_2 = [[0,1,0,0],[1,0,0,0],[0,0,0,1],[0,0,1,0]]
network_2 = np.array(list_2)

network_12 = network_1*network_2
network_12
## array([[0, 1, 0, 0],
##        [1, 0, 0, 0],
##        [0, 0, 0, 1],
##        [0, 0, 1, 0]])</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

#generate a sequence
list_1 &lt;- list(c(0,1,0,1),c(1,0,1,0),c(0,1,0,1),c(1,0,1,0))

network_1 &lt;- do.call(rbind,list_1)

#generate a sequence
list_2 = list(c(0,1,0,0),c(1,0,0,0),c(0,0,0,1),c(0,0,1,0))

network_2 &lt;- do.call(rbind,list_2)

network_12 = network_1*network_2
network_12
##      [,1] [,2] [,3] [,4]
## [1,]    0    1    0    0
## [2,]    1    0    0    0
## [3,]    0    0    0    1
## [4,]    0    0    1    0</code></pre>
</div>
</div>
</div>
<div id="select-specific-elements" class="section level2" number="3.1">
<h2 number="3.1"><span class="header-section-number">3.1</span> Select specific elements</h2>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

network_12 &gt; 0
## array([[False,  True, False, False],
##        [ True, False, False, False],
##        [False, False, False,  True],
##        [False, False,  True, False]])
network_12[network_12&gt;0]
## array([1, 1, 1, 1])</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R
 
network_12 &gt; 0
##       [,1]  [,2]  [,3]  [,4]
## [1,] FALSE  TRUE FALSE FALSE
## [2,]  TRUE FALSE FALSE FALSE
## [3,] FALSE FALSE FALSE  TRUE
## [4,] FALSE FALSE  TRUE FALSE

network_12[network_12&gt;0]
## [1] 1 1 1 1</code></pre>
</div>
</div>
</div>
<p>On thing that we often need is to modify specific value in a array that are satisfiying a condition. The first thing we want to know is which cells is satisfying the condition. In Python np.where is very common while in R we use the which function.</p>
<p>See how the execution time is changing depending on the size of the vector</p>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

arr = np.arange(200000)


t = time.time()
results = [(i if i%2==0 else 0) for i in arr]
time.time() - t

## 0.1324150562286377
t = time.time()
results = np.where(arr%2!=0,0,arr)
time.time() - t
## 0.017920732498168945</code></pre>
<pre class="python"><code># Python 

arr = np.arange(20000000)


t = time.time()
results = [(i if i%2==0 else 0) for i in arr]
time.time() - t

## 12.344438552856445
t = time.time()
results = np.where(arr%2!=0,0,arr)
time.time() - t
## 0.84578537940979</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

vec &lt;- seq(1,200000)

t &lt;- Sys.time()
results &lt;- rep(0,length(vec))
for(i in 1:length(vec)){
  if(vec[i]%%2!=0){
    results[i] = 0
  } else {
    results[i] = vec[i]
  }
}
Sys.time() - t
## Time difference of 0.07865405 secs


t &lt;- Sys.time()
results &lt;- ifelse(vec%%2!=0,vec,0)
Sys.time() - t
## Time difference of 0.01493287 secs</code></pre>
<pre class="r"><code># R

vec &lt;- seq(1,20000000)

t &lt;- Sys.time()
results &lt;- rep(0,length(vec))
for(i in 1:length(vec)){
  if(vec[i]%%2!=0){
    results[i] = 0
  } else {
    results[i] = vec[i]
  }
}
Sys.time() - t
## Time difference of 6.414556 secs


t &lt;- Sys.time()
results &lt;- ifelse(vec%%2!=0,vec,0)
Sys.time() - t
## Time difference of 1.934487 secs


## other way using which

t &lt;- Sys.time()
vec[which(vec%%2==0)] = 0
Sys.time() - t 
## Time difference of 1.209666 secs</code></pre>
</div>
</div>
</div>
</div>
<div id="other-conditional-vectorization" class="section level2" number="3.2">
<h2 number="3.2"><span class="header-section-number">3.2</span> Other conditional vectorization</h2>
<div class="row">
<div class="r">
<pre class="r"><code># R
library(dplyr)
## 
## Attaching package: &#39;dplyr&#39;
## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag
## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union
# Fast version of ifelse()
x &lt;- c(-3:3, NA)
if_else(condition = x &lt; 0,
        true      = &quot;neg&quot;,
        false     = &quot;pos&quot;,
        missing   = &quot;NA&quot;)
## [1] &quot;neg&quot; &quot;neg&quot; &quot;neg&quot; &quot;pos&quot; &quot;pos&quot; &quot;pos&quot; &quot;pos&quot; &quot;NA&quot;


# Vectorised ifelse statements


x &lt;- 1:10
case_when(
  x %% 6 == 0 ~ &quot;fizz buzz&quot;,
  x %% 2 == 0 ~ &quot;fizz&quot;,
  x %% 3 == 0 ~ &quot;buzz&quot;,
  TRUE ~ as.character(x)
)
##  [1] &quot;1&quot;         &quot;fizz&quot;      &quot;buzz&quot;      &quot;fizz&quot;      &quot;5&quot;         &quot;fizz buzz&quot;
##  [7] &quot;7&quot;         &quot;fizz&quot;      &quot;buzz&quot;      &quot;fizz&quot;</code></pre>
</div>
</div>
</div>
</div>
<div id="algebra" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> Algebra</h1>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 
from numpy.linalg import inv, qr 
 
X = np.array([[0,1,5,1],[2,1,3,1],[2,1,9,6],[7,2,1,0],[8,3,5,5]]) 
Y = np.array([0,1,2,5,4])

X
## array([[0, 1, 5, 1],
##        [2, 1, 3, 1],
##        [2, 1, 9, 6],
##        [7, 2, 1, 0],
##        [8, 3, 5, 5]])
X.T.dot(X) 
# same as 
## array([[121,  42,  71,  54],
##        [ 42,  16,  34,  23],
##        [ 71,  34, 141,  87],
##        [ 54,  23,  87,  63]])
XtX = np.dot(X.T,X)
# same as 
X.T @ X

# inverse Matrix
## array([[121,  42,  71,  54],
##        [ 42,  16,  34,  23],
##        [ 71,  34, 141,  87],
##        [ 54,  23,  87,  63]])
inv(XtX)

# Identity matrix
## array([[ 0.23199214, -0.71424803,  0.11636773, -0.09879148],
##        [-0.71424803,  2.33481201, -0.37284193,  0.27469787],
##        [ 0.11636773, -0.37284193,  0.10787934, -0.11260311],
##        [-0.09879148,  0.27469787, -0.11260311,  0.15576444]])
np.diag(np.ones(3))
## array([[1., 0., 0.],
##        [0., 1., 0.],
##        [0., 0., 1.]])</code></pre>
<pre class="python"><code># Python 

XtY = np.dot(X.T,Y)

# OLS 
Beta = inv(XtX).dot(XtY)
Beta
## array([ 1.17202187, -1.85550547,  0.42034337, -0.38384807])</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

 
X &lt;- do.call(rbind,list(c(0,1,5,1),c(2,1,3,1),c(2,1,9,6),c(7,2,1,0),c(8,3,5,5))) 
Y &lt;- c(0,1,2,5,4)
 
t(X)%*%X
##      [,1] [,2] [,3] [,4]
## [1,]  121   42   71   54
## [2,]   42   16   34   23
## [3,]   71   34  141   87
## [4,]   54   23   87   63

XtX &lt;- t(X)%*%X

# inverse Matrix
solve(XtX)
##             [,1]       [,2]       [,3]        [,4]
## [1,]  0.23199214 -0.7142480  0.1163677 -0.09879148
## [2,] -0.71424803  2.3348120 -0.3728419  0.27469787
## [3,]  0.11636773 -0.3728419  0.1078793 -0.11260311
## [4,] -0.09879148  0.2746979 -0.1126031  0.15576444

# Identity matrix
diag(3)
##      [,1] [,2] [,3]
## [1,]    1    0    0
## [2,]    0    1    0
## [3,]    0    0    1</code></pre>
<pre class="r"><code># R


XtY = t(X)%*%Y

# OLS 
Beta = solve(XtX) %*% XtY
Beta
##            [,1]
## [1,]  1.1720219
## [2,] -1.8555055
## [3,]  0.4203434
## [4,] -0.3838481</code></pre>
</div>
</div>
</div>
</div>
<div id="operation-on-array" class="section level1" number="5">
<h1 number="5"><span class="header-section-number">5</span> Operation on array</h1>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th align="center">Equivalent</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>+</td>
<td align="center">np.add</td>
<td align="right">Addition (e.g., 1 + 1 = 2)</td>
</tr>
<tr class="even">
<td>-</td>
<td align="center">np.subtract</td>
<td align="right">Subtraction (e.g., 3 - 2 = 1)</td>
</tr>
<tr class="odd">
<td>-</td>
<td align="center">np.negative</td>
<td align="right">Unary negation (e.g., -2)</td>
</tr>
<tr class="even">
<td>*</td>
<td align="center">np.multiply</td>
<td align="right">Multiplication (e.g., 2 * 3 = 6)</td>
</tr>
<tr class="odd">
<td>/</td>
<td align="center">np.divide</td>
<td align="right">Division (e.g., 3 / 2 = 1.5)</td>
</tr>
<tr class="even">
<td>//</td>
<td align="center">np.floor_divide</td>
<td align="right">Floor division (e.g., 3 // 2 = 1)</td>
</tr>
<tr class="odd">
<td>**</td>
<td align="center">np.power</td>
<td align="right">Exponentiation (e.g., 2 ** 3 = 8)</td>
</tr>
<tr class="even">
<td>%</td>
<td align="center">np.mod</td>
<td align="right">Modulus/remainder (e.g., 9 % 4 = 1)</td>
</tr>
</tbody>
</table>
<div class="row">
<div class="col-md-6">
<div class="python">
<pre class="python"><code># Python 

# nb of link
network_12.sum()/2
# same since there is only 0 and 1 
## 2.0
(network_12&gt;0).sum()/2

# share of link 
## 2.0
network_12.mean()


# nb link by entities
## 0.25
network_12.sum(axis=1)

# share of link across entities (by columns)
## array([1, 1, 1, 1])
network_12.mean(1)

## array([0.25, 0.25, 0.25, 0.25])</code></pre>
</div>
</div>
<div class="col-md-6">
<div class="r">
<pre class="r"><code># R

# nb of link
sum(network_12)
## [1] 4
# same since there is only 0 and 1 
sum(network_12[which(network_12&gt;0,arr.ind = T)]) # see the arr.ind to get the two coordinates
## [1] 4

# share of link 
mean(network_12)
## [1] 0.25


# nb link by entities
apply(network_12,MARGIN = 2,FUN = sum)
## [1] 1 1 1 1

# share of link across entities (by columns)
apply(network_12,MARGIN = 2,FUN = mean)
## [1] 0.25 0.25 0.25 0.25</code></pre>
</div>
</div>
</div>
<div id="apply-familly-r" class="section level2" number="5.1">
<h2 number="5.1"><span class="header-section-number">5.1</span> Apply familly (R)</h2>
<p>The apply() family allows to manipulate slices of data from matrices, arrays, lists and dataframes in a repetitive way. It avoid explicit use of loop constructs. They act on an input list, matrix or array and apply a function with one or several optional arguments.</p>
<div id="apply" class="section level3" number="5.1.1">
<h3 number="5.1.1"><span class="header-section-number">5.1.1</span> apply</h3>
<p>apply takes a matrix as input, transform it by row or by columns and returns a matrix</p>
<div class="r">
<pre class="r"><code># R

mat_1 = matrix(1:(4*4),4,4)

# by row
apply(mat_1,MARGIN = 1,FUN = sum)
## [1] 28 32 36 40

# by columns
apply(mat_1,MARGIN = 2,FUN = function(x){x**2})
##      [,1] [,2] [,3] [,4]
## [1,]    1   25   81  169
## [2,]    4   36  100  196
## [3,]    9   49  121  225
## [4,]   16   64  144  256</code></pre>
</div>
</div>
<div id="lapply" class="section level3" number="5.1.2">
<h3 number="5.1.2"><span class="header-section-number">5.1.2</span> lapply</h3>
<p>lapply takes a list as input, transform it and returns a list.</p>
<div class="r">
<pre class="r"><code># R

list_1 = list(mat_1,seq(1,8,0.5))
list_1
## [[1]]
##      [,1] [,2] [,3] [,4]
## [1,]    1    5    9   13
## [2,]    2    6   10   14
## [3,]    3    7   11   15
## [4,]    4    8   12   16
## 
## [[2]]
##  [1] 1.0 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5 7.0 7.5 8.0

# by row
lapply(list_1,FUN = function(x){x**2})
## [[1]]
##      [,1] [,2] [,3] [,4]
## [1,]    1   25   81  169
## [2,]    4   36  100  196
## [3,]    9   49  121  225
## [4,]   16   64  144  256
## 
## [[2]]
##  [1]  1.00  2.25  4.00  6.25  9.00 12.25 16.00 20.25 25.00 30.25 36.00 42.25
## [13] 49.00 56.25 64.00

# by columns
lapply(list_1,FUN = sum)
## [[1]]
## [1] 136
## 
## [[2]]
## [1] 67.5</code></pre>
</div>
</div>
<div id="sapply" class="section level3" number="5.1.3">
<h3 number="5.1.3"><span class="header-section-number">5.1.3</span> sapply</h3>
<p>sapply takes a list as input, transform it and returns a matrix.</p>
<div class="r">
<pre class="r"><code># R

list_1 = list(mat_1,seq(1,8,length.out = length(mat_1)))
list_1
## [[1]]
##      [,1] [,2] [,3] [,4]
## [1,]    1    5    9   13
## [2,]    2    6   10   14
## [3,]    3    7   11   15
## [4,]    4    8   12   16
## 
## [[2]]
##  [1] 1.000000 1.466667 1.933333 2.400000 2.866667 3.333333 3.800000 4.266667
##  [9] 4.733333 5.200000 5.666667 6.133333 6.600000 7.066667 7.533333 8.000000

# by row
sapply(list_1,FUN = function(x){x**2})
##       [,1]      [,2]
##  [1,]    1  1.000000
##  [2,]    4  2.151111
##  [3,]    9  3.737778
##  [4,]   16  5.760000
##  [5,]   25  8.217778
##  [6,]   36 11.111111
##  [7,]   49 14.440000
##  [8,]   64 18.204444
##  [9,]   81 22.404444
## [10,]  100 27.040000
## [11,]  121 32.111111
## [12,]  144 37.617778
## [13,]  169 43.560000
## [14,]  196 49.937778
## [15,]  225 56.751111
## [16,]  256 64.000000

# by columns
sapply(list_1,FUN = sum)
## [1] 136  72</code></pre>
</div>
</div>
<div id="mapply" class="section level3" number="5.1.4">
<h3 number="5.1.4"><span class="header-section-number">5.1.4</span> mapply</h3>
<p>mapply is used for ‘multivariate’ apply. The main goal is to vectorize arguments to a function that is not usually accepting vectors as arguments. Depending on the size of the outputs it return a matrix or a list.</p>
<div class="r">
<pre class="r"><code># R

# returns a matrix (all length.out = 5)
mapply(FUN = function(x,y,z){seq(x,y,length.out = z)},1,1:5,5)
##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1 1.00  1.0 1.00    1
## [2,]    1 1.25  1.5 1.75    2
## [3,]    1 1.50  2.0 2.50    3
## [4,]    1 1.75  2.5 3.25    4
## [5,]    1 2.00  3.0 4.00    5

# returns a list (length.out goes from 1 to 5)
mapply(FUN = function(x,y,z){seq(x,y,length.out = z)},1,1:5,1:5)
## [[1]]
## [1] 1
## 
## [[2]]
## [1] 1 2
## 
## [[3]]
## [1] 1 2 3
## 
## [[4]]
## [1] 1 2 3 4
## 
## [[5]]
## [1] 1 2 3 4 5</code></pre>
</div>
</div>
</div>
<div id="map-python" class="section level2" number="5.2">
<h2 number="5.2"><span class="header-section-number">5.2</span> Map (Python)</h2>
<p>In python we can use <code>map</code> to do the same thing than apply familly in R with a bit of manipulation.</p>
<p><code>map</code> takes different kind of input, it transforms it by row if the object is an array and returns an iterator.You can then transform this into a list or an array.</p>
<div class="python">
<pre class="python"><code># Python

arr_1 = np.arange(1,17).reshape([4,4], order = &#39;F&#39;)

# by row, by columns you need to tranpose the array
map(np.sum,arr_1)
## &lt;map object at 0x00000000278FFE08&gt;
list(map(np.sum,arr_1))
## [28, 32, 36, 40]
np.fromiter(map(sum,arr_1.T), dtype = np.int)

# with a list
## array([10, 26, 42, 58])
lst_1 = [arr_1,np.linspace(1,8,num=arr_1.size)]
list(map(lambda x: x**2,lst_1))
## [array([[  1,  25,  81, 169],
##        [  4,  36, 100, 196],
##        [  9,  49, 121, 225],
##        [ 16,  64, 144, 256]], dtype=int32), array([ 1.        ,  2.15111111,  3.73777778,  5.76      ,  8.21777778,
##        11.11111111, 14.44      , 18.20444444, 22.40444444, 27.04      ,
##        32.11111111, 37.61777778, 43.56      , 49.93777778, 56.75111111,
##        64.        ])]</code></pre>
</div>
<ul>
<li>Pandas’ apply function:</li>
</ul>
<p>Using pandas one can also use apply functions, the difference with map is that by default it works by columns since variables in a df are store by colmuns.</p>
<div class="python">
<pre class="python"><code># Python

import pandas as pd

arr_1 = np.arange(1,17).reshape([4,4], order = &#39;F&#39;)

#transform the array into a DataFrame
df_1 = pd.DataFrame(arr_1)
df_1


# Apply the function by column
##    0  1   2   3
## 0  1  5   9  13
## 1  2  6  10  14
## 2  3  7  11  15
## 3  4  8  12  16
df_1.apply(sum)

## 0    10
## 1    26
## 2    42
## 3    58
## dtype: int64</code></pre>
</div>
</div>
</div>
<div id="exercices" class="section level1" number="6">
<h1 number="6"><span class="header-section-number">6</span> Exercices</h1>
<div id="exercice-1" class="section level2" number="6.1">
<h2 number="6.1"><span class="header-section-number">6.1</span> Exercice 1</h2>
<p>The series, <span class="math inline">\(1^{1} + 2^{2} + 3^{3} + ... + 10^{10} = 10405071317\)</span>.</p>
<p>Find the last ten digits of the series, <span class="math inline">\(1^{1} + 2^{2} + 3^{3} + ... + 1000^{1000}\)</span>.</p>
</div>
<div id="exercice-2" class="section level2" number="6.2">
<h2 number="6.2"><span class="header-section-number">6.2</span> Exercice 2</h2>
<p>Try to vectorize exercices from chapter 1, you can also compare it with apply/map functions.</p>
</div>
<div id="exercice-3" class="section level2" number="6.3">
<h2 number="6.3"><span class="header-section-number">6.3</span> Exercice 3</h2>
<p>2520 is the smallest number that can be divided by each of the numbers from 1 to 10 without any remainder.</p>
<p>What is the smallest positive number that is evenly divisible by all of the numbers from 1 to 20? ## Solutions</p>
<p><a href="exo_chap_2.html">Solutions for exercice 1, 2 and 3</a></p>
</div>
<div id="exercice-4" class="section level2" number="6.4">
<h2 number="6.4"><span class="header-section-number">6.4</span> Exercice 4</h2>
<p>A palindromic number reads the same both ways. The largest palindrome made from the product of two 2-digit numbers is 9009 = 91 × 99.</p>
<p>Find the largest palindrome made from the product of two 3-digit numbers.</p>
</div>
<div id="execrice-5" class="section level2" number="6.5">
<h2 number="6.5"><span class="header-section-number">6.5</span> Execrice 5</h2>
<p><span class="math inline">\(2^{15} = 32768\)</span> and the sum of its digits is 3 + 2 + 7 + 6 + 8 = 26.</p>
<p>What is the sum of the digits of the number <span class="math inline">\(2^{1000}\)</span>?</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
