---
title: "Basics"
author: "Pierre Pelletier"
date: "3 septembre 2020"
output:
  html_document:
    toc: true
    number_sections: true
    toc_float:
      collapsed: false
      smooth_scroll: true
---


```{css, echo=FALSE}
#.r-chunk {
#  background-color: lightpink;
#}
#
#.py-chunk {
#  background-color: lightblue;
#}
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,error=TRUE,collapse = TRUE)
library(reticulate)

#  md_document:
#    variant: markdown_github
#
#
#<div class = "row">
#<div class = "col-md-6">
#<div class = "python">
#  
#
#</div>
#</div>
#<div class = "col-md-6">
#<div class = "r">  
#  
#  
#</div>
#</div>
#</div>


#<style>
#div.blue pre { background-color:lightblue; }
#div.blue pre.r { background-color:blue; }
#</style>
#
```

<style>
div.python pre { background-color:  #fdfcff; }
</style>

<style>
div.r pre { background-color: #fffffc; }
</style>

# Operations

## Arithmetic Operations
Python and R can both work as classical calculator, using "+", "-", "*" and "/" you can do arithmetic operations in both language.

<div class = "row">
<div class = "col-md-6">
<div class = "python">

```{python , collapse = T}
# Python 

1+2
1-2
1/2
1*2

```

</div>
</div>
<div class = "col-md-6">
<div class = "r">

```{r, collapse = TRUE}
# R

1+2
1-2
1/2
1*2
```

</div>
</div>
</div>

You can also apply exponantiation, Modulo and floor division easily in both language. Please note that in R you can writte the exponantiation "^". You cannot do that in Python (it is used for antoher operation) but both use "**" for exponantiation. Use this one for clarity.


<div class = "row">
<div class = "col-md-6">
<div class = "python">

```{python,echo = T,collapse = TRUE}
# Python 

2**8 # exponantiation
2^8 == 2**8 # False
8%3 # modulo
8//3 # floor division
```

</div>
</div>
<div class = "col-md-6">
<div class = "r">

```{r,echo=T,collapse = TRUE}
# R

2**8 # exponantiation
2^8 == 2**8 # TRUE
8%%3 # modulo
8%/%3 # floor division

```

</div>
</div>
</div>

##  Comparison Operators

In order to compare some values we can use comparison operators to investigate in a given value is equal to, not equal, greater than ... etc

Theses operators are the same in both language.


<div class = "row">
<div class = "col-md-6">
<div class = "python">
```{python,echo = T,collapse = TRUE}
# Python 

2==8
2!=8
2<8
2>8
2<=8

```

</div>
</div>
<div class = "col-md-6">
<div class = "r">
```{r,echo=T,collapse = TRUE}
# R

2==8
2!=8
2<8
2>8
2<=8
```
</div>
</div>
</div>

# Objects & Variables

ref used : https://www.practicaldatascience.org/html/vars_v_objects.html

Variables are used to store data. In Python and R, we do not need to declare a variable before assigning a value to this variable. You can think of a variable as a name to refers to an object. There is a big difference between python and R on the way the computer is storing object and variables that we will see in the end of the section.



## Difference between R and Python


In R, a variable and an object are the same things, they refers to the same entities. If you assign to a new variable a variable that already exist, it will refers to two different objects.

Things in Python are more conventional, but since some people learned R before Python it's important to notice that variables refers to an objet but they are still two entities. It means that two variables can refer to a single object. If two variables are pointing the same object, the modification made with one variable will be also available when using the other variable.There some 
In R two variable can refers to the same object, but once one variable is changed, a new space in the memomry is allocated to a new object.
However not all data-type of Python are muttable. Examples are provided later.



## textual and numerical variables

In R textual data are called 'character', in Python it is a string, abbreviate as 'str'. " or ' are used when you set a textual variable in both laguage, but you can also set a variable to textual variable if needed.

Numerical variables a decomposed in three types. In Python you'll have integer, float and complex. In R float is called 'double', reffering to double precision floating point. Without entering into details it means that the number have a precision up to 15 decimals. Float can refers to a precision of 7 decimals, however in Python the data-type 'float' has a precision of 15 numbers. They are ways to get more precisions using Numpy for example. 

Finaly you can check easily the data-type of the variable that you are dealing by asking the language with the command 'type' in Python, or 'typeof' in R.

<div class = "row">
<div class = "col-md-6">
<div class = "python">
```{python,echo = T,collapse = TRUE}
# Python 

import sys 
sys.float_info.dig # number of decimals

a = 1
type(a)

b = 1.1
type(b)

c = 1.1+2j
type(c)

d = 'd'
type(d)

# change the type
e = 2
f = str(e)
f
float(f)
```

</div>
</div>
<div class = "col-md-6">
<div class = "r">

```{r,echo=T,collapse = TRUE}
# R

a = 1
typeof(a)
a_int = 1L
typeof(a_int)

b = 1.1
typeof(b)

c = 1.1+2i
typeof(c)

d = 'd'
typeof(d)

# change the type
e = 2
f = as.character(e)
f
as.numeric(f)
```
</div>
</div>
</div>

## Other Data-Type (R)
https://www.statmethods.net/input/datatypes.html

There is a lot of datatype in both language that we will discover along the course, for now we will focus only on basic data-type that are directly available without using anyother package or library,in R common data-type are Vector, Matrix, List, Data frame and factor.


### Vectors and Matrices

<div class = "r">

<div class = "row">
<div class = "col-md-6">

```{r}
# R

vec = c(1, 2, 3)
length(which(vec==2)) # count elements of the list which are exactly equal to 2

vec = sort(vec,
           decreasing = TRUE)
vec
# access the element of a list
vec[1]
vec[which(vec==3)]
vec[2:length(vec)]
vec[length(vec):2]
vec[-1] # throwaway value


```

</div>
<div class = "col-md-6">

```{r}
# R

mat = matrix(c(1, 2, 3, 4, 5, 6),3,2)
dim(mat)
mat

length(which(mat==2)) # count elements of the list which are exactly equal to 2

vec = sort(mat,
           decreasing = TRUE)
vec
# access the element of a list
mat[1] # first element
which(mat==3,
      arr.ind = TRUE) # get row and columns for each value that match

mat[2:length(mat)] # gives you a vector
mat[2:dim(mat)[1],]
mat[length(mat):1]

mat[1,-1] # throwaway values


```

</div>
</div>

```{r}
# modify

b = rep(0,3)
vec = c(vec,b)
vec
mat_2 = rbind(vec,vec)
mat_2 
mat_2 = cbind(mat_2,mat_2)
mat_2

t_mat = t(mat) # transposition
t_mat[2,3] = as.character(t_mat[2,3]) # all values turn to character


i_mat = diag(1, 3)
i_mat


```


</div>

### Data frame

A Data frame in R is a matrix which can store different type of data, characters, numerics or factors. Contrary to the matrix it does not have a fixed dimension it means that you can create a column very easily using the operator '$'.

<div class = "r">

```{r,echo=T,collapse = TRUE}
# Python

df = data.frame(chr = letters[1:5], # letters is a vector of letter provided directly in R
                num = seq(1,5,1),
                fac = factor(c(rep('a',3),rep('b',2)))) 
class(df$chr) # automaticaly converted to factor, which can be very inneficient !
df$chr = as.character(df$chr)
class(df$chr)
colnames(df)
df
# access the element of a variable in a df
df$chr[3]
which(df==3,
      arr.ind = TRUE) 

df[1:2] # gives you a df with the first two columns !
df[3:dim(df)[1],]

df[1,-1] # throwaway values

```
```{r,echo = T,collapse = TRUE}
# modify

b = rep(0,3)
df = rbind(df,b) # introduce a new row in the data frame, note that we get a NA in the factor colmun because '0' is not a level
df$new_col = rep(2,6) # you can introduce new colmuns by specifiying the name and set a value


df
t_df = t(df) # transposition convert the df into a matrix
class(t_df)
```
</div>

### Arrays

Arrays is a généralisation of the matrix, it means that you can have more than two dimension. You can modify them as you modify a matrix.

<div class = "r">

```{r,echo=T,collapse = TRUE}
# Python

arr = array(seq(1,12,1), dim = c(2,2,3)) # create a matrix with 3 dimension
arr
# access the element of a dictionary
arr[1,,]
arr[,1,]
arr[,,1]
```
</div>

### Lists 

A list permits you to assemble an assortment of disconnected objects behind one variable, it is also possible to store objects which can be of different types.


<div class = "r">

```{r,echo=T,collapse = TRUE}
# Python

lst = list(df = df,
           mat = mat,
           arr = arr) # create a matrix with 3 dimension

lst
lst[[1]] # first element of the list, here it is the df
lst[[1]][1,] # first row of first element of the list
```
</div>



## Other Data-Type (Python)

refused : https://thomas-cokelaer.info/tutorials/python/lists.html

In Python the most common are List, Turple, sets, Dictionnary.
Note that for the moment when modifiying a variable we always use '='. Keep in mind that using the '.' can modify the object behind the variable in Python.

### Lists 

Keep in mind that Lists are mutable, as discussed in the Section "Difference between R and Python"

<div class = "python">
```{python,echo = T,collapse = TRUE}
# Python

a = [1, 2, 3]
a.count(2) # count elements of the list which are exactly equal to 2

a.sort(reverse = True)
a
# access the element of a list
a[0]
a.index(3)
a[1:]
a[:1]
a[0:-1]
a[:]

```
```{python,echo = T,collapse = TRUE}
# modify

b = [0, 0, 0]
list(zip(a,b)) # zip will pairs the ellements, it works also with more than 2 element ex: zip(a,b,c)
a.append(b)
a
a[4:5] = ['a','b']
a
a.extend([4, 5, 6])
a
a += [7,8] # works as extend
a
a.insert(2,[1,2])
a
a.remove(b)
a

a = a*2 # replicate the list n times
len(a) # number of elements in the list

```
```{python,echo = T,collapse = TRUE}
# mutable

a = [1,2,3]
b = a
b[0] = 12
a

```
</div>

### Turples

The main difference between Lists and Turples is the fact that Turples is an immutable type of data making it faster to use.

<div class = "python">
```{python,echo=T,collapse = TRUE}
# Python

a = (1, 2, 3)
a.count(2) # count elements of the turple which are exactly equal to 2

a
# access the element of a turple
a[0]
a.index(3)
a[1:]
a[:1]
a[0:-1]
a[:]

```
```{python,echo = T,collapse = TRUE}

# modify
a += (4,5) 
a
a = a*2 # replicate the turple n times
len(a) # number of elements in the turple

```
```{python,echo = T,collapse = TRUE}
# immutable

a = (1,2,3)
b = a
b[0] = 12
a

```
</div>

### Dictionaries

Dictionary refers to a way of storing data that is not sorted. It works with key and value associate with this key.


<div class = "python">
```{python,echo=T,collapse = TRUE}
# Python

a = {'a':1, 'b':2, 'c':3}
# access the element of a dictionary
a.keys()
a['a']
a.values()
a.items()
a.get('a')
a.get('d',4) # set to 4 if the key 'd' is not detected

a.pop('a') # pop will use the corresponding value to the key a and remove the pair (key, value).
a
a.popitem('b')
a
```
```{python,echo = T,collapse = TRUE}
# modify
a['a'] =1 
a.setdefault('d',0) # create new item with a default value

b = {'d':4,'e':5}
a.update(b) # update values from other dict
a
a.clear() # remove all items

```
```{python,echo = T,collapse = TRUE}
# mutable

a = {'a':1, 'b':2, 'c':3}
b = a
b['b'] = [12,14]
a
```

</div>

### Sets

<div class = "python">
```{python,echo=T,collapse = TRUE}
# Python

a = {1, 2, 3}
a
# access the element of a set

a[0] # since it unordered, you can not access to a given element of a set


```
```{python,echo = T,collapse = TRUE}
# modify
a['a'] =1 
a.setdefault('d',0) # create new item with a default value

b = {'d':4,'e':5}
a.update(b) # update values from other dict
a
a.clear() # remove all items

```
```{python,echo = T,collapse = TRUE}
# mutable

a = {'a':1, 'b':2, 'c':3}
b = a
b['b'] = [12,14]
a
```

</div>

sets are unordered collection of unique elements. If you give to a set multiple time the same element it will automatically delete dupplicated values.


# control flow

<div class = "row">
<div class = "col-md-6">
```{python,echo = T,collapse = TRUE}
# Python 
evens = []
for i in range(10):
    if i % 2 == 0:
        evens.append(i)
evens
# beter to writte this
[i for i in range(10) if i % 2 == 0]
```
</div>
<div class = "col-md-6">
```{r, warning = FALSE, echo=T}
lala = 1+1
lala
```
</div>
</div>

# Dealing with strings 

https://thomas-cokelaer.info/tutorials/python/strings.html


